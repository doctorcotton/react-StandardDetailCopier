# å¼€å‘æŒ‡å—

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Node.js 16+
- npm æˆ– yarn
- ç°ä»£æµè§ˆå™¨ï¼ˆChromeã€Edgeã€Safariï¼‰

### å®‰è£…ä¾èµ–

```bash
cd react-StandardDetailCopier
npm install
```

### å¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
npm run dev
```

æœåŠ¡å™¨å°†åœ¨ `http://localhost:5173` å¯åŠ¨ã€‚

### åœ¨é£ä¹¦å¤šç»´è¡¨æ ¼ä¸­æµ‹è¯•

1. æ‰“å¼€ä»»æ„é£ä¹¦å¤šç»´è¡¨æ ¼
2. ç‚¹å‡»ã€Œæ’ä»¶ã€â†’ã€Œè‡ªå®šä¹‰æ’ä»¶ã€â†’ã€Œ+æ–°å¢æ’ä»¶ã€
3. è¾“å…¥å¼€å‘åœ°å€ï¼š`http://localhost:5173`
4. ç‚¹å‡»ç¡®å®šï¼Œæ’ä»¶å°†åŠ è½½

## ğŸ“ é¡¹ç›®ç»“æ„

```
react-StandardDetailCopier/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ App.tsx                 # ä¸»åº”ç”¨ç»„ä»¶
â”‚   â”œâ”€â”€ App.css                 # å…¨å±€æ ·å¼
â”‚   â”œâ”€â”€ index.tsx               # å…¥å£æ–‡ä»¶
â”‚   â”œâ”€â”€ components/             # UI ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ TableSelector.tsx   # è¡¨é€‰æ‹©å™¨
â”‚   â”‚   â”œâ”€â”€ RecordList.tsx      # è®°å½•åˆ—è¡¨ï¼ˆå¸¦å¤é€‰æ¡†ï¼‰
â”‚   â”‚   â”œâ”€â”€ EmptyState.tsx      # ç©ºçŠ¶æ€ç»„ä»¶
â”‚   â”‚   â””â”€â”€ LoadApp/            # åŠ è½½ç»„ä»¶
â”‚   â”œâ”€â”€ hooks/                  # è‡ªå®šä¹‰ Hooks
â”‚   â”‚   â”œâ”€â”€ useTables.ts        # è¡¨æ•°æ®ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ useRecords.ts       # è®°å½•æ•°æ®ç®¡ç†
â”‚   â”‚   â””â”€â”€ useCopyRecords.ts   # å¤åˆ¶é€»è¾‘
â”‚   â”œâ”€â”€ utils/                  # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ fieldFilter.ts      # å­—æ®µè¿‡æ»¤é€»è¾‘
â”‚   â”‚   â””â”€â”€ copyHelper.ts       # å¤åˆ¶è¾…åŠ©å‡½æ•°
â”‚   â”œâ”€â”€ types/                  # TypeScript ç±»å‹å®šä¹‰
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â””â”€â”€ locales/                # å›½é™…åŒ–
â”‚       â”œâ”€â”€ zh.json             # ä¸­æ–‡
â”‚       â”œâ”€â”€ en.json             # è‹±æ–‡
â”‚       â””â”€â”€ i18n.ts             # i18n é…ç½®
â”œâ”€â”€ dist/                       # æ„å»ºäº§ç‰©ï¼ˆéœ€æäº¤åˆ° Gitï¼‰
â”œâ”€â”€ package.json                # é¡¹ç›®é…ç½®
â”œâ”€â”€ tsconfig.json               # TypeScript é…ç½®
â”œâ”€â”€ vite.config.js              # Vite é…ç½®
â””â”€â”€ README.md                   # é¡¹ç›®è¯´æ˜
```

## ğŸ”§ æ ¸å¿ƒæ¨¡å—è¯´æ˜

### 1. å·¥å…·å‡½æ•° (utils/)

#### fieldFilter.ts - å­—æ®µè¿‡æ»¤

è´Ÿè´£åˆ¤æ–­å“ªäº›å­—æ®µç±»å‹å¯ä»¥å¤åˆ¶ï¼Œå“ªäº›éœ€è¦è·³è¿‡ã€‚

```typescript
// ä¸å¯å¤åˆ¶çš„å­—æ®µç±»å‹
export const SKIP_FIELD_TYPES = [
  FieldType.Formula,        // å…¬å¼
  FieldType.Lookup,         // æŸ¥æ‰¾å¼•ç”¨
  FieldType.AutoNumber,     // è‡ªåŠ¨ç¼–å·
  // ...
];

// åˆ¤æ–­å­—æ®µæ˜¯å¦å¯å¤åˆ¶
export function isFieldCopyable(fieldType: FieldType): boolean {
  return !SKIP_FIELD_TYPES.includes(fieldType);
}
```

#### copyHelper.ts - å¤åˆ¶è¾…åŠ©

æ ¸å¿ƒå¤åˆ¶é€»è¾‘ï¼ŒåŒ…æ‹¬ï¼š
- è·å–æºè¡¨å’Œç›®æ ‡è¡¨
- å»ºç«‹å­—æ®µæ˜ å°„
- æ‰¹é‡è¯»å–å’Œå†™å…¥è®°å½•

```typescript
export async function copyRecords(
  sourceTableId: string,
  targetTableId: string,
  recordIds: string[]
): Promise<CopyResult>
```

### 2. è‡ªå®šä¹‰ Hooks (hooks/)

#### useTables.ts - è¡¨æ•°æ®ç®¡ç†

```typescript
export function useTables() {
  return {
    tables,        // æ‰€æœ‰è¡¨åˆ—è¡¨
    activeTableId, // å½“å‰æ¿€æ´»çš„è¡¨ID
    loading        // åŠ è½½çŠ¶æ€
  };
}
```

#### useRecords.ts - è®°å½•æ•°æ®ç®¡ç†

```typescript
export function useRecords(tableId: string) {
  return {
    records,  // è®°å½•åˆ—è¡¨
    loading   // åŠ è½½çŠ¶æ€
  };
}
```

#### useCopyRecords.ts - å¤åˆ¶é€»è¾‘

```typescript
export function useCopyRecords() {
  return {
    executeCopy, // æ‰§è¡Œå¤åˆ¶å‡½æ•°
    loading      // åŠ è½½çŠ¶æ€
  };
}
```

### 3. UI ç»„ä»¶ (components/)

#### TableSelector.tsx - è¡¨é€‰æ‹©å™¨

```typescript
interface TableSelectorProps {
  tables: ITableMeta[];
  value?: string;
  onChange: (value: string) => void;
  placeholder?: string;
  excludeTableId?: string; // æ’é™¤çš„è¡¨ID
  disabled?: boolean;
}
```

#### RecordList.tsx - è®°å½•åˆ—è¡¨

```typescript
interface RecordListProps {
  records: IRecord[];
  selectedIds: string[];
  onSelectionChange: (ids: string[]) => void;
  loading?: boolean;
}
```

#### EmptyState.tsx - ç©ºçŠ¶æ€

```typescript
interface EmptyStateProps {
  title?: string;
  description?: string;
  darkMode?: boolean;
}
```

## ğŸ¨ æ ·å¼è®¾è®¡

### CSS å˜é‡

åœ¨ `App.css` ä¸­å®šä¹‰äº†ä¸»é¢˜å˜é‡ï¼š

```css
:root {
  /* Light Mode */
  --primary-color: rgb(20, 86, 240);
  --bg-color: #fff;
  --text-primary: #1f2329;
  --text-secondary: #646a73;
  --border-color: #dee0e3;
}

/* Dark Mode */
body[theme-mode='dark'] {
  --primary-color: #4571e1;
  --bg-color: #1a1a1a;
  --text-primary: #e5e6e8;
  --text-secondary: #8f959e;
  --border-color: #434343;
}
```

### è®¾è®¡è§„èŒƒ

éµå¾ªé£ä¹¦ Base è®¾è®¡è§„èŒƒï¼š
- å­—ä½“ï¼šPingFang SCã€Microsoft Yahei
- æŒ‰é’®é«˜åº¦ï¼š32px
- åœ†è§’ï¼š4px
- é—´è·ï¼š8pxã€12pxã€16pxã€24pxï¼ˆ4 çš„å€æ•°ï¼‰

## ğŸŒ å›½é™…åŒ–

### æ·»åŠ æ–°è¯­è¨€

1. åœ¨ `src/locales/` åˆ›å»ºæ–°çš„è¯­è¨€æ–‡ä»¶ï¼ˆå¦‚ `ja.json`ï¼‰

```json
{
  "app": {
    "title": "ææ–™æ¨™æº–è©³ç´°ã‚³ãƒ”ãƒ¼",
    "description": "..."
  }
}
```

2. åœ¨ `src/locales/i18n.ts` ä¸­æ³¨å†Œ

```typescript
import translationJA from './ja.json';

const resources = {
  zh: { translation: translationZH },
  en: { translation: translationEN },
  ja: { translation: translationJA }, // æ–°å¢
};
```

### ä½¿ç”¨ç¿»è¯‘

```typescript
import { useTranslation } from 'react-i18next';

function MyComponent() {
  const { t } = useTranslation();
  return <div>{t('app.title')}</div>;
}
```

## ğŸ”¨ å¼€å‘æŠ€å·§

### è°ƒè¯•æŠ€å·§

1. **ä½¿ç”¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·**
   - F12 æ‰“å¼€å¼€å‘è€…å·¥å…·
   - æŸ¥çœ‹ Console æ—¥å¿—
   - ä½¿ç”¨ Network é¢æ¿æŸ¥çœ‹ API è°ƒç”¨

2. **æ·»åŠ æ—¥å¿—**
   ```typescript
   console.log('å­—æ®µæ˜ å°„:', fieldMapping);
   console.log('å‡†å¤‡å¤åˆ¶çš„è®°å½•:', newRecords);
   ```

3. **ä½¿ç”¨ React DevTools**
   - å®‰è£… React DevTools æµè§ˆå™¨æ’ä»¶
   - æŸ¥çœ‹ç»„ä»¶çŠ¶æ€å’Œ Props

### å¸¸è§é—®é¢˜

#### Q: å¦‚ä½•æ·»åŠ æ–°çš„å­—æ®µç±»å‹æ”¯æŒï¼Ÿ

ä¿®æ”¹ `src/utils/fieldFilter.ts`ï¼š

```typescript
export const SKIP_FIELD_TYPES = [
  // æ·»åŠ æˆ–åˆ é™¤å­—æ®µç±»å‹
];
```

#### Q: å¦‚ä½•ä¿®æ”¹å¤åˆ¶é€»è¾‘ï¼Ÿ

ä¿®æ”¹ `src/utils/copyHelper.ts` ä¸­çš„ `copyRecords` å‡½æ•°ã€‚

#### Q: å¦‚ä½•è‡ªå®šä¹‰æ ·å¼ï¼Ÿ

ä¿®æ”¹ `src/App.css`ï¼Œæˆ–åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ inline stylesã€‚

## ğŸ“¦ æ„å»ºå’Œå‘å¸ƒ

### æœ¬åœ°æ„å»º

```bash
npm run build
```

æ„å»ºäº§ç‰©è¾“å‡ºåˆ° `dist/` ç›®å½•ã€‚

### å‘å¸ƒåˆ°é£ä¹¦

1. **æäº¤ä»£ç **
   ```bash
   git add .
   git commit -m "feat: å®Œæˆæ’ä»¶å¼€å‘"
   git push
   ```

2. **åœ¨é£ä¹¦å¼€æ”¾å¹³å°åˆ›å»ºåº”ç”¨**
   - ç™»å½•é£ä¹¦å¼€æ”¾å¹³å°
   - åˆ›å»ºã€Œå¤šç»´è¡¨æ ¼æ’ä»¶ã€åº”ç”¨
   - é…ç½® GitHub ä»“åº“åœ°å€

3. **é…ç½®æ’ä»¶ä¿¡æ¯**
   - æ’ä»¶åç§°ï¼šåŸæ–™æ ‡å‡†æ˜ç»†ä¸€é”®å¤åˆ¶
   - ç®€çŸ­æè¿°ï¼šå¿«é€Ÿå¤åˆ¶åŸæ–™æ ‡å‡†çš„æ ‡å‡†æ˜ç»†è®°å½•
   - ç±»åˆ«ï¼šæ‰¹é‡å¤„ç†ã€è¡¨ç»“æ„å¤„ç†
   - ä¸Šä¼ å›¾æ ‡å’Œæˆªå›¾

4. **æäº¤å®¡æ ¸**
   - æäº¤å®¡æ ¸
   - ç­‰å¾…å®¡æ ¸é€šè¿‡
   - å‘å¸ƒåˆ°æ’ä»¶å¸‚åœº

## ğŸ§ª æµ‹è¯•

### åŠŸèƒ½æµ‹è¯•æ¸…å•

- [ ] èƒ½æ­£ç¡®è¯»å–æºè¡¨è®°å½•
- [ ] èƒ½æ­£ç¡®é€‰æ‹©ç›®æ ‡è¡¨
- [ ] èƒ½æ­£ç¡®è¿‡æ»¤å­—æ®µï¼ˆè·³è¿‡å…¬å¼ã€æŸ¥æ‰¾å¼•ç”¨ç­‰ï¼‰
- [ ] èƒ½æˆåŠŸå¤åˆ¶è®°å½•åˆ°ç›®æ ‡è¡¨
- [ ] æ”¯æŒ Light/Dark ä¸»é¢˜
- [ ] æ”¯æŒä¸­è‹±æ–‡åˆ‡æ¢
- [ ] æœ‰å®Œå–„çš„é”™è¯¯æç¤º
- [ ] æ€§èƒ½è‰¯å¥½ï¼ˆ100æ¡è®°å½• < 5ç§’ï¼‰

### è¾¹ç•Œæƒ…å†µæµ‹è¯•

- [ ] ç©ºè¡¨ï¼ˆæ²¡æœ‰è®°å½•ï¼‰
- [ ] å¤§é‡è®°å½•ï¼ˆ1000+ æ¡ï¼‰
- [ ] æ²¡æœ‰åŒ¹é…çš„å­—æ®µ
- [ ] æƒé™ä¸è¶³
- [ ] ç½‘ç»œé”™è¯¯

## ğŸ“ ä»£ç è§„èŒƒ

### TypeScript

- ä½¿ç”¨ä¸¥æ ¼æ¨¡å¼
- ä¸ºæ‰€æœ‰å‡½æ•°æ·»åŠ ç±»å‹æ³¨è§£
- ä½¿ç”¨ interface å®šä¹‰ç»„ä»¶ Props

### React

- ä½¿ç”¨å‡½æ•°ç»„ä»¶å’Œ Hooks
- é¿å…ä¸å¿…è¦çš„ re-render
- ä½¿ç”¨ useCallback å’Œ useMemo ä¼˜åŒ–æ€§èƒ½

### å‘½åè§„èŒƒ

- ç»„ä»¶ï¼šPascalCaseï¼ˆå¦‚ `TableSelector`ï¼‰
- å‡½æ•°ï¼šcamelCaseï¼ˆå¦‚ `copyRecords`ï¼‰
- å¸¸é‡ï¼šUPPER_SNAKE_CASEï¼ˆå¦‚ `SKIP_FIELD_TYPES`ï¼‰
- æ–‡ä»¶ï¼škebab-case æˆ– PascalCase

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿è´¡çŒ®ä»£ç ï¼è¯·éµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š

1. Fork é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

## ğŸ“„ è®¸å¯è¯

ISC

---

**æœ€åæ›´æ–°**: 2025-11-22

